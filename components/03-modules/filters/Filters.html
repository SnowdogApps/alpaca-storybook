<div class="filters">
  <alpaca-heading
    :level="2"
    class="filters__heading"
  >
    {{ activeFiltersHeading }}
  </alpaca-heading>
  <alpaca-divider class="filters__divider"/>
  <div class="filters__active">
    <alpaca-active-filters
      :items="activeFilterItems"
      clear-button="Clear all"
    />
  </div>
  <button
    class="filters__switcher"
    @click="showFilters"
  >
    Shopping Options
    <alpaca-icon
      icon="angle-down"
      :class="['filters__switcher-icon', {'filters__switcher-icon--active': !isVisible}]"
    />
  </button>
  <div :class="['filters__list', 'dropdown-list', {'filters__list--mobile-hidden' : isVisible}]">
    <alpaca-heading
      :level="2"
      class="filters__heading filters__heading--mobile-hidden"
    >
      {{ allFiltersHeading }}
    </alpaca-heading>
    <alpaca-divider class="filters__divider"/>
    <alpaca-dropdown-list
      secondary
    >
      <template
        v-if="checkboxItems && Array.isArray(checkboxItems)"
      >
        <alpaca-checkbox-filter
          v-for="{ key, checkboxArray } in getCheckboxArrayWithId"
          :key="key"
          :title="checkboxArray.name"
          :id="key"
          :items="checkboxArray.items"
          @select="selectOptions"
        />
      </template>
      <alpaca-checkbox-filter
        v-else-if="checkboxItems"
        key="key"
        :title="checkboxItems.name"
        id="checkboxId"
        :items="checkboxItems.items"
        @select="selectOptions"
      />
      <alpaca-swatch-filter
        v-if="swatchItems"
        :title="swatchItems.name"
        id="swatchId"
        :items="swatchItems.items"
        @click="checkSwatch"
      />
      <alpaca-color-filter
        v-if="colorItems"
        :title="colorItems.name"
        id="colorId"
        :items="colorItems.items"
        @click="checkColor"
      />
      <alpaca-range
        v-model="val"
        :min="min"
        :max="max"
        @apply="updateVal"
      />
    </alpaca-dropdown-list>
  </div>
</div>
